### ðŸ§© Session 3: Scaling & Load Balancing

| **#** | **step** | **description**  |**details**|
|----------|-----------------|-----------------|------|
|25        |AWS ALB deployment and flush setup|Objective: Deploy an ALB to route traffic to different EC2 instances based on ports (e.g., Author and Publisher AEM instances).|The load balancer now will listen to the traffic on port 80 (or 443 if you've set HTTPS), and route that traffic to the respective target groups (author or publisher) which are listening on their respective ports (4502 for author, 4503 for publisher). This ensures the standard web traffic received on port 80/443 is correctly routed to your AEM instances on their respective ports.<br>Also, remember to set up your security groups to allow traffic on these ports and restrict access to only trusted sources.|
|26       |ALB Configuration Walkthrough|Detailed step-by-step guide to configure an Application Load Balancer.|ðŸ›  Steps:<br>ðŸ”¹Go to EC2 Dashboard in the AWS Console.<br>ðŸ”¹Under Load Balancing, select Load Balancers and click Create Load Balancer.<br>ðŸ”¹Choose Application Load Balancer.<br>ðŸ”¹Configure:<br>Name your ALB.<br>ðŸ”¹Scheme: Internet-facing.<br>ðŸ”¹Listeners: Add HTTP (port 80) and/or HTTPS (port 443).<br>ðŸ”¹If using HTTPS, assign an SSL certificate from ACM.<br>ðŸ”¹Select or create Security Groups that allow traffic on required ports.<br>ðŸ”¹Configure Routing:<br>Create two Target Groups:<br>One for the Author instance (HTTP on port 4502)<br>One for Publisher instance (HTTP on port 4503)<br>ðŸ”¹Register EC2 instances:<br>Add the Author instance to the 4502 target group.<br>ðŸ”¹Add Publisher instances to the 4503 target group.<br>ðŸ”¹Click Create and wait for the ALB to provision.<br>ðŸ”¹Once active, verify:ALB status is active.<br>ðŸ”¹Target health checks show healthy.|
|27       |Setting up connection draining (flush setup)|Once set, the ALB will allow existing requests to the de-registering instance to complete for the specified delay timeout, thereby ensuring smooth operation even during instance de-registration. It's important to note that this setting applies to all targets in the target group. If you need different settings for different targets, you would have to separate them into different target groups.  <br>Remember that while connection draining provides a way to ensure application availability during maintenance or failure events, it's only one part of a comprehensive high availability strategy. Other techniques like auto-scaling, multi-AZ deployment, and proactive application health monitoring should also be considered.|ðŸ”¹ðŸ§¹ 2. Configure Connection Draining (Deregistration Delay)  <br>Objective: Allow active connections to complete before an instance is removed from the ALB (graceful shutdown).  <br>ðŸ›  Steps:  <br>ðŸ”¹In the EC2 Dashboard, go to Target Groups under Load Balancing.  <br>ðŸ”¹Select the target group you want to configure. <br>ðŸ”¹Click the Attributes tab.   <br>ðŸ”¹Click Edit attributes.   <br>ðŸ”¹Set Deregistration delay timeout (e.g., 600 seconds).  <br>ðŸ”¹Click Save.  <br>ðŸ§  This ensures clients arenâ€™t disconnected during instance termination or scale-in events.|
|28       |Configure Auto Scaling for EC2 Instances|You can test the setup by artificially increasing the load on your instances (if you have set up a scale-out policy based on load) or by setting a scheduled action for a future time and checking the behaviour of the Auto Scaling group at the scheduled time.|# ðŸ”¹Step 1: Sign in to AWS Management Console and open the EC2 Dashboard   <br>First, sign in to your AWS Management Console. Once logged in, navigate to the EC2 Dashboard.  <br># ðŸ”¹Step 2: Create a Launch Template  <br>A launch template will store the configuration for your EC2 instances.  <br>ðŸ”¹1. From the EC2 dashboard, click on "Launch Templates" under "INSTANCES" in the left navigation pane.  <br>ðŸ”¹2. Click on "Create launch template".  <br>ðŸ”¹3. Fill in the required details like the template name, description, Amazon Machine Image (AMI), instance type, key pair, security groups, and storage.  <br>ðŸ”¹4. Click on "Create launch template".  <br>#ðŸ”¹ Step 3: Configure Auto Scaling Group  <br>### **Auto Scaling Components**  <br>AWS Auto Scaling revolves around three key components:  <br>- **Groups:**Â These are the logical components of Auto Scaling, such as a group of EC2 instances for web-servers or a group of RDS instances for databases.  <br>- **Configuration Templates:**Â Templates instruct Auto Scaling groups on how to configure and launch new instances that align with scaling requirements.  <br>- **Scaling Options:**Â You have a plethora of ways to scale your Auto Scaling groups, either conditionally, scheduled, manually, or based on a predictive model.  |
|29       |Auto scaling|Remember that the Auto Scaling group might take a few minutes to launch new instances when the conditions for scale-out are met, and it might take a few minutes to terminate instances when scaling-in.|Now, you'll create an Auto Scaling group which will use the launch template.  <br>ðŸ”¹1. From the EC2 dashboard, click on "Auto Scaling groups" under "AUTO SCALING" in the left navigation pane.  <br>ðŸ”¹2. Click on "Create Auto Scaling group".  <br>ðŸ”¹3. Choose "Launch template" as your launch type and select the template you created earlier.  <br>ðŸ”¹4. Click on "Next".  <br>ðŸ”¹5. Choose your VPC and the subnets where your instances should be launched. Click on "Next".  <br>ðŸ”¹6. Specify the group size. You can set the desired, minimum and maximum number of instances for your Auto Scaling group. Click on "Next".  <br>ðŸ”¹7. You can optionally set up scaling policies to increase or decrease the number of instances based on load or schedule. Click on "Next".  <br>ðŸ”¹8. Add any necessary tags, then click on "Next".  <br>ðŸ”¹9. Review your settings and click on "Create Auto Scaling group".  <br>Congratulations! You've now set up an Auto Scaling group for your EC2 instances.|
|30       |CHECKPOINT|delete.... close down... |------|
